{
    "apiVersion": "batch/v1",
    "kind": "Job",
    "metadata": {
        "annotations": {
            "argocd.argoproj.io/tracking-id": "backstage:batch/Job:irembo/backstage-pre-install-db-migration",
            "helm.sh/hook": "pre-install",
            "helm.sh/hook-delete-policy": "hook-succeeded,before-hook-creation",
            "helm.sh/hook-weight": "0",
            "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"batch/v1\",\"kind\":\"Job\",\"metadata\":{\"annotations\":{\"argocd.argoproj.io/tracking-id\":\"backstage:batch/Job:irembo/backstage-pre-install-db-migration\",\"helm.sh/hook\":\"pre-install\",\"helm.sh/hook-delete-policy\":\"hook-succeeded,before-hook-creation\",\"helm.sh/hook-weight\":\"0\"},\"finalizers\":[\"argocd.argoproj.io/hook-finalizer\"],\"labels\":{\"app.kubernetes.io/instance\":\"backstage\",\"app.kubernetes.io/managed-by\":\"Helm\",\"app.kubernetes.io/name\":\"backstage\",\"app.kubernetes.io/version\":\"1.0.0\",\"helm.sh/chart\":\"backstage-0.1.0\"},\"name\":\"backstage-pre-install-db-migration\",\"namespace\":\"irembo\"},\"spec\":{\"template\":{\"metadata\":{\"name\":\"backstage-pre-install-db-migration\"},\"spec\":{\"containers\":[{\"args\":[\"echo \\\"Pre-install hook: Setting up database schema\\\"\\n# Simulating database migration/initialization\\nsleep 5\\necho \\\"Database migration completed successfully\\\"\\n\"],\"command\":[\"/bin/sh\",\"-c\"],\"env\":[{\"name\":\"POSTGRES_USER\",\"value\":\"backstage\"},{\"name\":\"POSTGRES_PASSWORD\",\"value\":\"backstage123\"},{\"name\":\"POSTGRES_HOST\",\"value\":\"backstage-postgresql\"},{\"name\":\"POSTGRES_PORT\",\"value\":\"5432\"},{\"name\":\"POSTGRES_DATABASE\",\"value\":\"backstage\"}],\"image\":\"spotify/backstage:latest\",\"name\":\"db-migration\"}],\"restartPolicy\":\"Never\"}}}}\n"
        },
        "creationTimestamp": "2025-05-20T14:15:25Z",
        "deletionGracePeriodSeconds": 0,
        "deletionTimestamp": "2025-05-20T14:39:41Z",
        "finalizers": [
            "argocd.argoproj.io/hook-finalizer"
        ],
        "generation": 2,
        "labels": {
            "app.kubernetes.io/instance": "backstage",
            "app.kubernetes.io/managed-by": "Helm",
            "app.kubernetes.io/name": "backstage",
            "app.kubernetes.io/version": "1.0.0",
            "helm.sh/chart": "backstage-0.1.0"
        },
        "name": "backstage-pre-install-db-migration",
        "namespace": "irembo",
        "resourceVersion": "37088",
        "uid": "e306a9a7-3075-4c96-bc9f-de762c667dd7"
    },
    "spec": {
        "backoffLimit": 6,
        "completionMode": "NonIndexed",
        "completions": 1,
        "manualSelector": false,
        "parallelism": 1,
        "podReplacementPolicy": "TerminatingOrFailed",
        "selector": {
            "matchLabels": {
                "batch.kubernetes.io/controller-uid": "e306a9a7-3075-4c96-bc9f-de762c667dd7"
            }
        },
        "suspend": false,
        "template": {
            "metadata": {
                "creationTimestamp": null,
                "labels": {
                    "batch.kubernetes.io/controller-uid": "e306a9a7-3075-4c96-bc9f-de762c667dd7",
                    "batch.kubernetes.io/job-name": "backstage-pre-install-db-migration",
                    "controller-uid": "e306a9a7-3075-4c96-bc9f-de762c667dd7",
                    "job-name": "backstage-pre-install-db-migration"
                },
                "name": "backstage-pre-install-db-migration"
            },
            "spec": {
                "containers": [
                    {
                        "args": [
                            "echo \"Pre-install hook: Setting up database schema\"\n# Simulating database migration/initialization\nsleep 5\necho \"Database migration completed successfully\"\n"
                        ],
                        "command": [
                            "/bin/sh",
                            "-c"
                        ],
                        "env": [
                            {
                                "name": "POSTGRES_USER",
                                "value": "backstage"
                            },
                            {
                                "name": "POSTGRES_PASSWORD",
                                "value": "backstage123"
                            },
                            {
                                "name": "POSTGRES_HOST",
                                "value": "backstage-postgresql"
                            },
                            {
                                "name": "POSTGRES_PORT",
                                "value": "5432"
                            },
                            {
                                "name": "POSTGRES_DATABASE",
                                "value": "backstage"
                            }
                        ],
                        "image": "spotify/backstage:latest",
                        "imagePullPolicy": "Always",
                        "name": "db-migration",
                        "resources": {},
                        "terminationMessagePath": "/dev/termination-log",
                        "terminationMessagePolicy": "File"
                    }
                ],
                "dnsPolicy": "ClusterFirst",
                "restartPolicy": "Never",
                "schedulerName": "default-scheduler",
                "securityContext": {},
                "terminationGracePeriodSeconds": 30
            }
        }
    },
    "status": {
        "ready": 0,
        "startTime": "2025-05-20T14:15:25Z",
        "terminating": 0,
        "uncountedTerminatedPods": {}
    }
}
